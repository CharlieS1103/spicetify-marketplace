!async function(){for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(e=>setTimeout(e,10));(()=>{var _={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}},U=class{constructor(e){this.init(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})}init(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||_,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,s){return s&&!this.debug?null:("string"==typeof e[0]&&(e[0]=""+r+this.prefix+" "+e[0]),this.logger[t](e))}create(e){return new U(this.logger,{prefix:this.prefix+`:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new U(this.logger,e)}},l=new U,e=class{constructor(){this.observers={}}on(e,r){return e.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);var t=this.observers[e].get(r)||0;this.observers[e].set(r,t+1)}),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(s){for(var e=arguments.length,n=new Array(1<e?e-1:0),t=1;t<e;t++)n[t-1]=arguments[t];this.observers[s]&&Array.from(this.observers[s].entries()).forEach(e=>{var[t,r]=e;for(let e=0;e<r;e++)t(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(e=>{var[t,r]=e;for(let e=0;e<r;e++)t.apply(t,[s,...n])})}};function c(){let r,s;var e=new Promise((e,t)=>{r=e,s=t});return e.resolve=r,e.reject=s,e}function F(e){return null==e?"":""+e}function T(e,t,r){e.forEach(e=>{t[e]&&(r[e]=t[e])})}var D=/###/g;function i(e,t,r){function s(e){return e&&-1<e.indexOf("###")?e.replace(D,"."):e}function n(){return!e||"string"==typeof e}var a="string"!=typeof t?t:t.split(".");let i=0;for(;i<a.length-1;){if(n())return{};var o=s(a[i]);!e[o]&&r&&(e[o]=new r),e=Object.prototype.hasOwnProperty.call(e,o)?e[o]:{},++i}return n()?{}:{obj:e,k:s(a[i])}}function V(s,n,a){var{obj:e,k:t}=i(s,n,Object);if(void 0!==e||1===n.length)e[t]=a;else{let e=n[n.length-1],t=n.slice(0,n.length-1),r=i(s,t,Object);for(;void 0===r.obj&&t.length;)e=t[t.length-1]+"."+e,t=t.slice(0,t.length-1),(r=i(s,t,Object))&&r.obj&&void 0!==r.obj[r.k+"."+e]&&(r.obj=void 0);r.obj[r.k+"."+e]=a}}function B(e,t,r){var{obj:e,k:t}=i(e,t,Object);e[t]=e[t]||[],e[t].push(r)}function h(e,t){var{obj:e,k:t}=i(e,t);if(e)return e[t]}function q(e,t,r){for(const s in t)"__proto__"!==s&&"constructor"!==s&&(s in e?"string"==typeof e[s]||e[s]instanceof String||"string"==typeof t[s]||t[s]instanceof String?r&&(e[s]=t[s]):q(e[s],t[s],r):e[s]=t[s])}function b(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var z={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function K(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,e=>z[e]):e}var J=[" ",",","?","!",";"],H=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){var t=this.regExpMap.get(e);return void 0!==t||(t=new RegExp(e),this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,t),this.regExpQueue.push(e)),t}}(20);function W(e,t,r){t=t||"",r=r||"";var s=J.filter(e=>t.indexOf(e)<0&&r.indexOf(e)<0);if(0===s.length)return 1;var n,s=H.getRegExp(`(${s.map(e=>"?"===e?"\\?":e).join("|")})`);let a=!s.test(e);return a||0<(n=e.indexOf(r))&&!s.test(e.substring(0,n))&&(a=!0),a}function G(e,t,r){var a=2<arguments.length&&void 0!==r?r:".";if(e){if(e[t])return e[t];var i=t.split(a);let n=e;for(let s=0;s<i.length;){if(!n||"object"!=typeof n)return;let t,r="";for(let e=s;e<i.length;++e)if(e!==s&&(r+=a),r+=i[e],void 0!==(t=n[r])&&!(-1<["string","number","boolean"].indexOf(typeof t)&&e<i.length-1)){s+=e-s+1;break}n=t}return n}}function o(e){return e&&0<e.indexOf("_")?e.replace("_","-"):e}var Y=class extends e{constructor(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){e=this.options.ns.indexOf(e);-1<e&&this.options.ns.splice(e,1)}getResource(e,t,r){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},n=(void 0!==s.keySeparator?s:this.options).keySeparator,s=(void 0!==s.ignoreJSONStructure?s:this.options).ignoreJSONStructure;let a;-1<e.indexOf(".")?a=e.split("."):(a=[e,t],r&&(Array.isArray(r)?a.push(...r):"string"==typeof r&&n?a.push(...r.split(n)):a.push(r)));var i=h(this.data,a);return!i&&!t&&!r&&-1<e.indexOf(".")&&(e=a[0],t=a[1],r=a.slice(2).join(".")),i||!s||"string"!=typeof r?i:G(this.data&&this.data[e]&&this.data[e][t],r,n)}addResource(e,t,r,s){var n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{silent:!1},a=(void 0!==n.keySeparator?n:this.options).keySeparator;let i=[e,t];r&&(i=i.concat(a?r.split(a):r)),-1<e.indexOf(".")&&(s=t,t=(i=e.split("."))[1]),this.addNamespaces(t),V(this.data,i,s),n.silent||this.emit("added",e,t,r,s)}addResources(e,t,r){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const n in r)"string"!=typeof r[n]&&!Array.isArray(r[n])||this.addResource(e,t,n,r[n],{silent:!0});s.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,s,n){var a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1};let i=[e,t],o=(-1<e.indexOf(".")&&(s=r,r=t,t=(i=e.split("."))[1]),this.addNamespaces(t),h(this.data,i)||{});a.skipCopy||(r=JSON.parse(JSON.stringify(r))),s?q(o,r,n):o={...o,...r},V(this.data,i,o),a.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t=t||this.options.defaultNS,"v1"===this.options.compatibilityAPI?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(e=>t[e]&&0<Object.keys(t[e]).length)}toJSON(){return this.data}},X={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,r,s,n){return e.forEach(e=>{this.processors[e]&&(t=this.processors[e].process(t,r,s,n))}),t}},Z={},Q=class extends e{constructor(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};super(),T(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=l.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){return null!=e&&(e=this.resolve(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{interpolation:{}}))&&void 0!==e.res}extractFromKey(e,t){let r=(void 0!==t.nsSeparator?t:this.options).nsSeparator;void 0===r&&(r=":");var s=(void 0!==t.keySeparator?t:this.options).keySeparator;let n=t.ns||this.options.defaultNS||[];var a=r&&-1<e.indexOf(r),t=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||W(e,r,s));if(a&&!t){a=e.match(this.interpolator.nestingRegexp);if(a&&0<a.length)return{key:e,namespaces:n};t=e.split(r);(r!==s||r===s&&-1<this.options.ns.indexOf(t[0]))&&(n=t.shift()),e=t.join(s)}return{key:e,namespaces:n="string"==typeof n?[n]:n}}translate(r,s,n){if(s=(s="object"==typeof(s="object"!=typeof s&&this.options.overloadTranslationOptionHandler?this.options.overloadTranslationOptionHandler(arguments):s)?{...s}:s)||{},null==r)return"";Array.isArray(r)||(r=[String(r)]);var e=(void 0!==s.returnDetails?s:this.options).returnDetails,a=(void 0!==s.keySeparator?s:this.options).keySeparator;const{key:i,namespaces:t}=this.extractFromKey(r[r.length-1],s),o=t[t.length-1];var l=s.lng||this.language,c=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&"cimode"===l.toLowerCase())return c?(c=s.nsSeparator||this.options.nsSeparator,e?{res:""+o+c+i,usedKey:i,exactUsedKey:i,usedLng:l,usedNS:o,usedParams:this.getUsedParamsDetails(s)}:""+o+c+i):e?{res:i,usedKey:i,exactUsedKey:i,usedLng:l,usedNS:o,usedParams:this.getUsedParamsDetails(s)}:i;c=this.resolve(r,s);let u=c&&c.res;var h=c&&c.usedKey||i,f=c&&c.exactUsedKey||i,d=Object.prototype.toString.apply(u),p=(void 0!==s.joinArrays?s:this.options).joinArrays,g=!this.i18nFormat||this.i18nFormat.handleAsObject,m="string"!=typeof u&&"boolean"!=typeof u&&"number"!=typeof u;if(g&&u&&m&&["[object Number]","[object Function]","[object RegExp]"].indexOf(d)<0&&("string"!=typeof p||!Array.isArray(u))){if(!s.returnObjects&&!this.options.returnObjects)return this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!"),m=this.options.returnedObjectHandler?this.options.returnedObjectHandler(h,u,{...s,ns:t}):`key '${i} (${this.language})' returned an object instead of string.`,e?(c.res=m,c.usedParams=this.getUsedParamsDetails(s),c):m;if(a){var b,d=Array.isArray(u),v=d?[]:{},y=d?f:h;for(const k in u)Object.prototype.hasOwnProperty.call(u,k)&&(b=""+y+a+k,v[k]=this.translate(b,{...s,joinArrays:!1,ns:t}),v[k]===b)&&(v[k]=u[k]);u=v}}else if(g&&"string"==typeof p&&Array.isArray(u))u=(u=u.join(p))&&this.extendTranslation(u,r,s,n);else{let e=!1,t=!1;m=void 0!==s.count&&"string"!=typeof s.count;const x=Q.hasDefaultValue(s);d=m?this.pluralResolver.getSuffix(l,s.count,s):"",f=s.ordinal&&m?this.pluralResolver.getSuffix(l,s.count,{ordinal:!1}):"";const S=m&&!s.ordinal&&0===s.count&&this.pluralResolver.shouldUseIntlApi(),L=S&&s[`defaultValue${this.options.pluralSeparator}zero`]||s["defaultValue"+d]||s["defaultValue"+f]||s.defaultValue,N=(!this.isValidLookup(u)&&x&&(e=!0,u=L),this.isValidLookup(u)||(t=!0,u=i),(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&t?void 0:u),O=x&&L!==u&&this.options.updateMissing;if(t||e||O){this.logger.log(O?"updateKey":"missingKey",l,o,i,O?L:u),a&&(h=this.resolve(i,{...s,keySeparator:!1}))&&h.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.");let t=[];var w=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if("fallback"===this.options.saveMissingTo&&w&&w[0])for(let e=0;e<w.length;e++)t.push(w[e]);else"all"===this.options.saveMissingTo?t=this.languageUtils.toResolveHierarchy(s.lng||this.language):t.push(s.lng||this.language);const C=(e,t,r)=>{r=x&&r!==u?r:N;this.options.missingKeyHandler?this.options.missingKeyHandler(e,o,t,r,O,s):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(e,o,t,r,O,s),this.emit("missingKey",e,o,t,u)};this.options.saveMissing&&(this.options.saveMissingPlurals&&m?t.forEach(t=>{var e=this.pluralResolver.getSuffixes(t,s);S&&s[`defaultValue${this.options.pluralSeparator}zero`]&&e.indexOf(this.options.pluralSeparator+"zero")<0&&e.push(this.options.pluralSeparator+"zero"),e.forEach(e=>{C([t],i+e,s["defaultValue"+e]||L)})}):C(t,i,L))}u=this.extendTranslation(u,r,s,c,n),t&&u===i&&this.options.appendNamespaceToMissingKey&&(u=o+":"+i),(t||e)&&this.options.parseMissingKeyHandler&&(u="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?o+":"+i:i,e?u:void 0):this.options.parseMissingKeyHandler(u))}return e?(c.res=u,c.usedParams=this.getUsedParamsDetails(s),c):u}extendTranslation(r,s,n,a,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)r=this.i18nFormat.parse(r,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});var l="string"==typeof r&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n:this.options).interpolation.skipOnVariables;let e,t=(l&&(c=r.match(this.interpolator.nestingRegexp),e=c&&c.length),n.replace&&"string"!=typeof n.replace?n.replace:n);this.options.interpolation.defaultVariables&&(t={...this.options.interpolation.defaultVariables,...t}),r=this.interpolator.interpolate(r,t,n.lng||this.language||a.usedLng,n),l&&(l=(c=r.match(this.interpolator.nestingRegexp))&&c.length,e<l)&&(n.nest=!1),!n.lng&&"v1"!==this.options.compatibilityAPI&&a&&a.res&&(n.lng=this.language||a.usedLng),!1!==n.nest&&(r=this.interpolator.nest(r,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i&&i[0]===t[0]&&!n.context?(o.logger.warn(`It seems you are nesting recursively key: ${t[0]} in key: `+s[0]),null):o.translate(...t,s)},n)),n.interpolation&&this.interpolator.reset()}var c=n.postProcess||this.options.postProcess,l="string"==typeof c?[c]:c;return r=null!=r&&l&&l.length&&!1!==n.applyPostProcessor?X.handle(l,r,s,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(n)},...n}:n,this):r}resolve(e){let h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},f,s,d,p,n;return(e="string"==typeof e?[e]:e).forEach(t=>{if(!this.isValidLookup(f)){t=this.extractFromKey(t,h);const o=t.key;s=o;let e=t.namespaces;this.options.fallbackNS&&(e=e.concat(this.options.fallbackNS));const l=void 0!==h.count&&"string"!=typeof h.count,c=l&&!h.ordinal&&0===h.count&&this.pluralResolver.shouldUseIntlApi(),u=void 0!==h.context&&("string"==typeof h.context||"number"==typeof h.context)&&""!==h.context,r=h.lngs||this.languageUtils.toResolveHierarchy(h.lng||this.language,h.fallbackLng);e.forEach(i=>{this.isValidLookup(f)||(n=i,!Z[r[0]+"-"+i]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(n)&&(Z[r[0]+"-"+i]=!0,this.logger.warn(`key "${s}" for languages "${r.join(", ")}" won't get resolved as namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),r.forEach(t=>{if(!this.isValidLookup(f)){p=t;var e,r=[o];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(r,o,t,i,h);else{let e;l&&(e=this.pluralResolver.getSuffix(t,h.count,h));var s,n=this.options.pluralSeparator+"zero",a=this.options.pluralSeparator+"ordinal"+this.options.pluralSeparator;l&&(r.push(o+e),h.ordinal&&0===e.indexOf(a)&&r.push(o+e.replace(a,this.options.pluralSeparator)),c)&&r.push(o+n),u&&(s=""+o+this.options.contextSeparator+h.context,r.push(s),l)&&(r.push(s+e),h.ordinal&&0===e.indexOf(a)&&r.push(s+e.replace(a,this.options.pluralSeparator)),c)&&r.push(s+n)}for(;e=r.pop();)this.isValidLookup(f)||(d=e,f=this.getResource(t,i,e,h))}}))})}}),{res:f,usedKey:s,exactUsedKey:d,usedLng:p,usedNS:n}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,r){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return(this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat:this.resourceStore).getResource(e,t,r,s)}getUsedParamsDetails(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.replace&&"string"!=typeof e.replace;let r=t?e.replace:e;if(t&&void 0!==e.count&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!t){r={...r};for(const s of["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"])delete r[s]}return r}static hasDefaultValue(e){var t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&void 0!==e[r])return!0;return!1}};function ee(e){return e.charAt(0).toUpperCase()+e.slice(1)}var te=class{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=l.create("languageUtils")}getScriptPartFromCode(e){return!(e=o(e))||e.indexOf("-")<0||2===(e=e.split("-")).length||(e.pop(),"x"===e[e.length-1].toLowerCase())?null:this.formatLanguageCode(e.join("-"))}getLanguagePartFromCode(e){return!(e=o(e))||e.indexOf("-")<0?e:(e=e.split("-"),this.formatLanguageCode(e[0]))}formatLanguageCode(t){if("string"==typeof t&&-1<t.indexOf("-")){var r=["hans","hant","latn","cyrl","cans","mong","arab"];let e=t.split("-");return this.options.lowerCaseLng?e=e.map(e=>e.toLowerCase()):2===e.length?(e[0]=e[0].toLowerCase(),e[1]=e[1].toUpperCase(),-1<r.indexOf(e[1].toLowerCase())&&(e[1]=ee(e[1].toLowerCase()))):3===e.length&&(e[0]=e[0].toLowerCase(),2===e[1].length&&(e[1]=e[1].toUpperCase()),"sgn"!==e[0]&&2===e[2].length&&(e[2]=e[2].toUpperCase()),-1<r.indexOf(e[1].toLowerCase())&&(e[1]=ee(e[1].toLowerCase())),-1<r.indexOf(e[2].toLowerCase()))&&(e[2]=ee(e[2].toLowerCase())),e.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(e){return"languageOnly"!==this.options.load&&!this.options.nonExplicitSupportedLngs||(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||-1<this.supportedLngs.indexOf(e)}getBestMatchFromCodes(e){if(!e)return null;let r;return e.forEach(e=>{r||(e=this.formatLanguageCode(e),this.options.supportedLngs&&!this.isSupportedCode(e))||(r=e)}),!r&&this.options.supportedLngs&&e.forEach(e=>{if(!r){const t=this.getLanguagePartFromCode(e);if(this.isSupportedCode(t))return r=t;r=this.options.supportedLngs.find(e=>e===t||!(e.indexOf("-")<0&&t.indexOf("-")<0)&&(0<e.indexOf("-")&&t.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===t||0===e.indexOf(t)&&1<t.length)?e:void 0)}}),r=r||this.getFallbackCodes(this.options.fallbackLng)[0]}getFallbackCodes(e,t){if(!e)return[];if("string"==typeof(e="function"==typeof e?e(t):e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return(r=(r=(r=(r=r||e[this.getScriptPartFromCode(t)])||e[this.formatLanguageCode(t)])||e[this.getLanguagePartFromCode(t)])||e.default)||[]}toResolveHierarchy(e,t){t=this.getFallbackCodes(t||this.options.fallbackLng||[],e);const r=[],s=e=>{e&&(this.isSupportedCode(e)?r.push(e):this.logger.warn("rejecting language code not found in supportedLngs: "+e))};return"string"==typeof e&&(-1<e.indexOf("-")||-1<e.indexOf("_"))?("languageOnly"!==this.options.load&&s(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&s(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&s(this.getLanguagePartFromCode(e))):"string"==typeof e&&s(this.formatLanguageCode(e)),t.forEach(e=>{r.indexOf(e)<0&&s(this.formatLanguageCode(e))}),r}},re=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],se={1:function(e){return Number(1<e)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:2<=e%10&&e%10<=4&&(e%100<10||20<=e%100)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:3<=e%100&&e%100<=10?3:11<=e%100?4:5)},6:function(e){return Number(1==e?0:2<=e&&e<=4?1:2)},7:function(e){return Number(1==e?0:2<=e%10&&e%10<=4&&(e%100<10||20<=e%100)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(2<=e)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:2<e&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:2<=e%10&&(e%100<10||20<=e%100)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||1<e%100&&e%100<11?1:10<e%100&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||0<e%100&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||10<e)&&e%10==0?2:3)}},ne=["v1","v2","v3"],ae=["v4"],ie={zero:0,one:1,two:2,few:3,many:4,other:5};function oe(){const r={};return re.forEach(t=>{t.lngs.forEach(e=>{r[e]={numbers:t.nr,plurals:se[t.fc]}})}),r}var le=class{constructor(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=l.create("pluralResolver"),this.options.compatibilityJSON&&!ae.includes(this.options.compatibilityJSON)||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=oe()}addRule(e,t){this.rules[e]=t}getRule(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(o("dev"===e?"en":e),{type:t.ordinal?"ordinal":"cardinal"})}catch(e){return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){e=this.getRule(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{});return this.shouldUseIntlApi()?e&&1<e.resolvedOptions().pluralCategories.length:e&&1<e.numbers.length}getPluralFormsOfKey(e,t){return this.getSuffixes(e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).map(e=>""+t+e)}getSuffixes(t){let r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};var e=this.getRule(t,r);return e?this.shouldUseIntlApi()?e.resolvedOptions().pluralCategories.sort((e,t)=>ie[e]-ie[t]).map(e=>""+this.options.prepend+(r.ordinal?"ordinal"+this.options.prepend:"")+e):e.numbers.map(e=>this.getSuffix(t,e,r)):[]}getSuffix(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},s=this.getRule(e,r);return s?this.shouldUseIntlApi()?""+this.options.prepend+(r.ordinal?"ordinal"+this.options.prepend:"")+s.select(t):this.getSuffixRetroCompatible(s,t):(this.logger.warn("no plural rule found for: "+e),"")}getSuffixRetroCompatible(e,t){t=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let r=e.numbers[t];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===r?r="plural":1===r&&(r=""));var s=()=>this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString();return"v1"===this.options.compatibilityJSON?1===r?"":"number"==typeof r?"_plural_"+r.toString():s():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?s():this.options.prepend&&t.toString()?this.options.prepend+t.toString():t.toString()}shouldUseIntlApi(){return!ne.includes(this.options.compatibilityJSON)}};function ce(e,t,r,s,n){var a,i,o,l=3<arguments.length&&void 0!==s?s:".",c=!(4<arguments.length&&void 0!==n)||n;i=t;let u=void 0!==(a=h(a=e,o=r))?a:h(i,o);return u=!u&&c&&"string"==typeof r&&void 0===(u=G(e,r,l))?G(t,r,l):u}var ue=class{constructor(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.logger=l.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(e=>e),this.init(e)}init(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},{escape:e,escapeValue:t,useRawValueToEscape:r,prefix:s,prefixEscaped:n,suffix:a,suffixEscaped:i,formatSeparator:o,unescapeSuffix:l,unescapePrefix:c,nestingPrefix:u,nestingPrefixEscaped:h,nestingSuffix:f,nestingSuffixEscaped:d,nestingOptionsSeparator:p,maxReplaces:g,alwaysFormat:m}=(e.interpolation||(e.interpolation={escapeValue:!0}),e.interpolation);this.escape=void 0!==e?e:K,this.escapeValue=void 0===t||t,this.useRawValueToEscape=void 0!==r&&r,this.prefix=s?b(s):n||"{{",this.suffix=a?b(a):i||"}}",this.formatSeparator=o||",",this.unescapePrefix=l?"":c||"-",this.unescapeSuffix=!this.unescapePrefix&&l||"",this.nestingPrefix=u?b(u):h||b("$t("),this.nestingSuffix=f?b(f):d||b(")"),this.nestingOptionsSeparator=p||",",this.maxReplaces=g||1e3,this.alwaysFormat=void 0!==m&&m,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){var e=(e,t)=>e&&e.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,this.prefix+"(.+?)"+this.suffix),this.regexpUnescape=e(this.regexpUnescape,""+this.prefix+this.unescapePrefix+"(.+?)"+this.unescapeSuffix+this.suffix),this.nestingRegexp=e(this.nestingRegexp,this.nestingPrefix+"(.+?)"+this.nestingSuffix)}interpolate(s,r,n,a){let i,o,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function t(e){return e.replace(/\$/g,"$$$$")}const u=e=>{var t;return e.indexOf(this.formatSeparator)<0?(t=ce(r,c,e,this.options.keySeparator,this.options.ignoreJSONStructure),this.alwaysFormat?this.format(t,void 0,n,{...a,...r,interpolationkey:e}):t):(e=(t=e.split(this.formatSeparator)).shift().trim(),t=t.join(this.formatSeparator).trim(),this.format(ce(r,c,e,this.options.keySeparator,this.options.ignoreJSONStructure),t,n,{...a,...r,interpolationkey:e}))},h=(this.resetRegExp(),a&&a.missingInterpolationHandler||this.options.missingInterpolationHandler),f=(a&&a.interpolation&&void 0!==a.interpolation.skipOnVariables?a:this.options).interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>t(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?t(this.escape(e)):t(e)}].forEach(e=>{for(l=0;i=e.regex.exec(s);){var t=i[1].trim();if(void 0===(o=u(t)))if("function"==typeof h){var r=h(s,i,a);o="string"==typeof r?r:""}else{if(!a||!Object.prototype.hasOwnProperty.call(a,t)){if(f){o=i[0];continue}this.logger.warn(`missed to pass in variable ${t} for interpolating `+s)}o=""}else"string"==typeof o||this.useRawValueToEscape||(o=F(o));r=e.safeValue(o);if(s=s.replace(i[0],r),f?(e.regex.lastIndex+=o.length,e.regex.lastIndex-=i[0].length):e.regex.lastIndex=0,++l>=this.maxReplaces)break}}),s}nest(r,s){let n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a,i,o;function l(r,e){var s=this.nestingOptionsSeparator;if(!(r.indexOf(s)<0)){var n=r.split(new RegExp(s+"[ ]*{"));let t="{"+n[1];r=n[0];var n=(t=this.interpolate(t,o)).match(/'/g),a=t.match(/"/g);(n&&n.length%2==0&&!a||a.length%2!=0)&&(t=t.replace(/'/g,'"'));try{o=JSON.parse(t),e&&(o={...e,...o})}catch(e){return this.logger.warn("failed parsing options string in nesting for key "+r,e),""+r+s+t}o.defaultValue&&-1<o.defaultValue.indexOf(this.prefix)&&delete o.defaultValue}return r}for(;a=this.nestingRegexp.exec(r);){let e=[],t=((o=(o={...n}).replace&&"string"!=typeof o.replace?o.replace:o).applyPostProcessor=!1,delete o.defaultValue,!1);var c;if(-1===a[0].indexOf(this.formatSeparator)||/{.*}/.test(a[1])||(c=a[1].split(this.formatSeparator).map(e=>e.trim()),a[1]=c.shift(),e=c,t=!0),(i=s(l.call(this,a[1].trim(),o),o))&&a[0]===r&&"string"!=typeof i)return i;(i="string"!=typeof i?F(i):i)||(this.logger.warn(`missed to resolve ${a[1]} for nesting `+r),i=""),t&&(i=e.reduce((e,t)=>this.format(e,t,n.lng,{...n,interpolationkey:a[1].trim()}),i.trim())),r=r.replace(a[0],i),this.regexp.lastIndex=0}return r}};function he(e){let t=e.toLowerCase().trim();const r={};return-1<e.indexOf("(")&&(e=e.split("("),t=e[0].toLowerCase().trim(),e=e[1].substring(0,e[1].length-1),"currency"===t&&e.indexOf(":")<0?r.currency||(r.currency=e.trim()):"relativetime"===t&&e.indexOf(":")<0?r.range||(r.range=e.trim()):e.split(";").forEach(e=>{var t;e&&([e,...t]=e.split(":"),t=t.join(":").trim().replace(/^'+|'+$/g,""),e=e.trim(),r[e]||(r[e]=t),"false"===t&&(r[e]=!1),"true"===t&&(r[e]=!0),isNaN(t)||(r[e]=parseInt(t,10)))})),{formatName:t,formatOptions:r}}function r(a){const i={};return function(e,t,r){var s=t+JSON.stringify(r);let n=i[s];return n||(n=a(o(t),r),i[s]=n),n(e)}}var fe=class{constructor(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.logger=l.create("formatter"),this.options=e,this.formats={number:r((e,t)=>{const r=new Intl.NumberFormat(e,{...t});return e=>r.format(e)}),currency:r((e,t)=>{const r=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>r.format(e)}),datetime:r((e,t)=>{const r=new Intl.DateTimeFormat(e,{...t});return e=>r.format(e)}),relativetime:r((e,t)=>{const r=new Intl.RelativeTimeFormat(e,{...t});return e=>r.format(e,t.range||"day")}),list:r((e,t)=>{const r=new Intl.ListFormat(e,{...t});return e=>r.format(e)})},this.init(e)}init(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=t.formatSeparator||t.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=r(t)}format(e,t,i){let o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return t.split(this.formatSeparator).reduce((t,r)=>{var{formatName:r,formatOptions:s}=he(r);if(this.formats[r]){let e=t;try{var n=o&&o.formatParams&&o.formatParams[o.interpolationkey]||{},a=n.locale||n.lng||o.locale||o.lng||i;e=this.formats[r](t,a,{...s,...o,...n})}catch(e){this.logger.warn(e)}return e}return this.logger.warn("there was no format function for "+r),t},e)}};function de(e,t){void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)}var pe=class extends e{constructor(e,t,r){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=s,this.logger=l.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=0<=s.maxRetries?s.maxRetries:5,this.retryTimeout=1<=s.retryTimeout?s.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,s.backend,s)}queueLoad(e,t,n,r){const a={},i={},o={},l={};return e.forEach(r=>{let s=!0;t.forEach(e=>{var t=r+"|"+e;!n.reload&&this.store.hasResourceBundle(r,e)?this.state[t]=2:this.state[t]<0||(1===this.state[t]?void 0===i[t]&&(i[t]=!0):(this.state[t]=1,s=!1,void 0===i[t]&&(i[t]=!0),void 0===a[t]&&(a[t]=!0),void 0===l[e]&&(l[e]=!0)))}),s||(o[r]=!0)}),(Object.keys(a).length||Object.keys(i).length)&&this.queue.push({pending:i,pendingCount:Object.keys(i).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(a),pending:Object.keys(i),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(l)}}loaded(e,t,r){var s=e.split("|");const n=s[0],a=s[1],i=(t&&this.emit("failedLoading",n,a,t),r&&this.store.addResourceBundle(n,a,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,{});this.queue.forEach(r=>{B(r.loaded,[n],a),de(r,e),t&&r.errors.push(t),0!==r.pendingCount||r.done||(Object.keys(r.loaded).forEach(t=>{i[t]||(i[t]={});var e=r.loaded[t];e.length&&e.forEach(e=>{void 0===i[t][e]&&(i[t][e]=!0)})}),r.done=!0,r.errors.length?r.callback(r.errors):r.callback())}),this.emit("loaded",i),this.queue=this.queue.filter(e=>!e.done)}read(s,n,a){let i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,l=5<arguments.length?arguments[5]:void 0;if(!s.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads)this.waitingReads.push({lng:s,ns:n,fcName:a,tried:i,wait:o,callback:l});else{this.readingCalls++;const r=(e,t)=>{var r;this.readingCalls--,0<this.waitingReads.length&&(r=this.waitingReads.shift(),this.read(r.lng,r.ns,r.fcName,r.tried,r.wait,r.callback)),e&&t&&i<this.maxRetries?setTimeout(()=>{this.read.call(this,s,n,a,i+1,2*o,l)},o):l(e,t)};var e=this.backend[a].bind(this.backend);if(2!==e.length)return e(s,n,r);try{var t=e(s,n);t&&"function"==typeof t.then?t.then(e=>r(null,e)).catch(r):r(null,t)}catch(e){r(e)}}}prepareLoading(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},s=3<arguments.length?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e));e=this.queueLoad(e,t="string"==typeof t?[t]:t,r,s);if(!e.toLoad.length)return e.pending.length||s(),null;e.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(r){let s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";var e=r.split("|");const n=e[0],a=e[1];this.read(n,a,"read",void 0,void 0,(e,t)=>{e&&this.logger.warn(`${s}loading namespace ${a} for language ${n} failed`,e),!e&&t&&this.logger.log(`${s}loaded namespace ${a} for language `+n,t),this.loaded(r,e,t)})}saveMissing(t,r,s,n,a){var i=5<arguments.length&&void 0!==arguments[5]?arguments[5]:{};let o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(r))this.logger.warn(`did not save key "${s}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(null!=s&&""!==s){if(this.backend&&this.backend.create){i={...i,isUpdate:a},a=this.backend.create.bind(this.backend);if(a.length<6)try{let e;(e=5===a.length?a(t,r,s,n,i):a(t,r,s,n))&&"function"==typeof e.then?e.then(e=>o(null,e)).catch(o):o(null,e)}catch(e){o(e)}else a(t,r,s,n,o,i)}t&&t[0]&&this.store.addResource(t[0],r,s,n)}}};function ge(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){let t={};if("object"==typeof e[1]&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const r=e[3]||e[2];Object.keys(r).forEach(e=>{t[e]=r[e]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function me(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function u(){}function be(t){Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(e=>{"function"==typeof t[e]&&(t[e]=t[e].bind(t))})}var ve,a=class extends e{constructor(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0;if(super(),this.options=me(e),this.services={},this.logger=l,this.modules={external:[]},be(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var n=this;let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length?arguments[1]:void 0;this.isInitializing=!0,"function"==typeof e&&(r=e,e={}),!e.defaultNS&&!1!==e.defaultNS&&e.ns&&("string"==typeof e.ns?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));var t=ge();function s(e){return e?"function"==typeof e?new e:e:null}if(this.options={...t,...this.options,...me(e)},"v1"!==this.options.compatibilityAPI&&(this.options.interpolation={...t.interpolation,...this.options.interpolation}),void 0!==e.keySeparator&&(this.options.userDefinedKeySeparator=e.keySeparator),void 0!==e.nsSeparator&&(this.options.userDefinedNsSeparator=e.nsSeparator),!this.options.isClone){this.modules.logger?l.init(s(this.modules.logger),this.options):l.init(null,this.options);let e;this.modules.formatter?e=this.modules.formatter:"undefined"!=typeof Intl&&(e=fe);var a=new te(this.options),i=(this.store=new Y(this.options.resources,this.options),this.services);i.logger=l,i.resourceStore=this.store,i.languageUtils=a,i.pluralResolver=new le(a,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!e||this.options.interpolation.format&&this.options.interpolation.format!==t.interpolation.format||(i.formatter=s(e),i.formatter.init(i,this.options),this.options.interpolation.format=i.formatter.format.bind(i.formatter)),i.interpolator=new ue(this.options),i.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},i.backendConnector=new pe(s(this.modules.backend),i.resourceStore,i,this.options),i.backendConnector.on("*",function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];n.emit(e,...r)}),this.modules.languageDetector&&(i.languageDetector=s(this.modules.languageDetector),i.languageDetector.init)&&i.languageDetector.init(i,this.options.detection,this.options),this.modules.i18nFormat&&(i.i18nFormat=s(this.modules.i18nFormat),i.i18nFormat.init)&&i.i18nFormat.init(this),this.translator=new Q(this.services,this.options),this.translator.on("*",function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];n.emit(e,...r)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}this.format=this.options.interpolation.format,r=r||u,!this.options.fallbackLng||this.services.languageDetector||this.options.lng||0<(a=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng)).length&&"dev"!==a[0]&&(this.options.lng=a[0]),this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(e=>{this[e]=function(){return n.store[e](...arguments)}});["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(e=>{this[e]=function(){return n.store[e](...arguments),n}});const o=c();t=()=>{var e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(t),r(e,t)};if(this.languages&&"v1"!==this.options.compatibilityAPI&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initImmediate?t():setTimeout(t,0),o}loadResources(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:u;var r="string"==typeof e?e:this.language;if("function"==typeof e&&(t=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&"cimode"===r.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return t();const s=[],n=e=>{e&&"cimode"!==e&&this.services.languageUtils.toResolveHierarchy(e).forEach(e=>{"cimode"!==e&&s.indexOf(e)<0&&s.push(e)})};r?n(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(e=>n(e)),this.options.preload&&this.options.preload.forEach(e=>n(e)),this.services.backendConnector.load(s,this.options.ns,e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),t(e)})}else t(null)}reloadResources(e,t,r){const s=c();return e=e||this.languages,t=t||this.options.ns,r=r||u,this.services.backendConnector.reload(e,t,e=>{s.resolve(),r(e)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(e.type)return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&X.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this;throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()")}setResolvedLanguage(e){if(e&&this.languages&&!(-1<["cimode","dev"].indexOf(e)))for(let e=0;e<this.languages.length;e++){var t=this.languages[e];if(!(-1<["cimode","dev"].indexOf(t))&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}}changeLanguage(r,s){var n=this;this.isLanguageChangingTo=r;const a=c(),i=(this.emit("languageChanging",r),e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)}),o=(e,t)=>{t?(i(t),this.translator.changeLanguage(t),this.isLanguageChangingTo=void 0,this.emit("languageChanged",t),this.logger.log("languageChanged",t)):this.isLanguageChangingTo=void 0,a.resolve(function(){return n.t(...arguments)}),s&&s(e,function(){return n.t(...arguments)})};var e=e=>{const t="string"==typeof(e=r||e||!this.services.languageDetector?e:[])?e:this.services.languageUtils.getBestMatchFromCodes(e);t&&(this.language||i(t),this.translator.language||this.translator.changeLanguage(t),this.services.languageDetector)&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(t),this.loadResources(t,e=>{o(e,t)})};return r||!this.services.languageDetector||this.services.languageDetector.async?!r&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(e):this.services.languageDetector.detect(e):e(r):e(this.services.languageDetector.detect()),a}getFixedT(e,t,l){var c=this;function u(e,t){let r;if("object"!=typeof t){for(var s=arguments.length,n=new Array(2<s?s-2:0),a=2;a<s;a++)n[a-2]=arguments[a];r=c.options.overloadTranslationOptionHandler([e,t].concat(n))}else r={...t};r.lng=r.lng||u.lng,r.lngs=r.lngs||u.lngs,r.ns=r.ns||u.ns,""!==r.keyPrefix&&(r.keyPrefix=r.keyPrefix||l||u.keyPrefix);const i=c.options.keySeparator||".";let o;return o=r.keyPrefix&&Array.isArray(e)?e.map(e=>""+r.keyPrefix+i+e):r.keyPrefix?""+r.keyPrefix+i+e:e,c.t(o,r)}return"string"==typeof e?u.lng=e:u.lngs=e,u.ns=t,u.keyPrefix=l,u}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=t.lng||this.resolvedLanguage||this.languages[0],s=!!this.options&&this.options.fallbackLng,n=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var a=(e,t)=>{e=this.services.backendConnector.state[e+"|"+t];return-1===e||2===e};if(t.precheck){t=t.precheck(this,a);if(void 0!==t)return t}return!!this.hasResourceBundle(r,e)||!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages)&&(!a(r,e)||s&&!a(n,e)))}loadNamespaces(e,t){const r=c();return this.options.ns?((e="string"==typeof e?[e]:e).forEach(e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}),this.loadResources(e=>{r.resolve(),t&&t(e)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=c(),s=this.options.preload||[];e=(e="string"==typeof e?[e]:e).filter(e=>s.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e));return e.length?(this.options.preload=s.concat(e),this.loadResources(e=>{r.resolve(),t&&t(e)}),r):(t&&t(),Promise.resolve())}dir(e){var t;return!(e=e||this.resolvedLanguage||(this.languages&&0<this.languages.length?this.languages[0]:this.language))||(t=this.services&&this.services.languageUtils||new te(ge()),-1<["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e)))||1<e.toLowerCase().indexOf("-arab")?"rtl":"ltr"}static createInstance(){return new a(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},1<arguments.length?arguments[1]:void 0)}cloneInstance(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:u,r=e.forkResourceStore,s=(r&&delete e.forkResourceStore,{...this.options,...e,isClone:!0});const n=new a(s);void 0===e.debug&&void 0===e.prefix||(n.logger=n.logger.clone(e));return["store","services","language"].forEach(e=>{n[e]=this[e]}),n.services={...this.services},n.services.utils={hasLoadedNamespace:n.hasLoadedNamespace.bind(n)},r&&(n.store=new Y(this.store.data,s),n.services.resourceStore=n.store),n.translator=new Q(n.services,s),n.translator.on("*",function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];n.emit(e,...r)}),n.init(s,t),n.translator.options=s,n.translator.backendConnector.services.utils={hasLoadedNamespace:n.hasLoadedNamespace.bind(n)},n}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}},e=a.createInstance(),ye=(e.createInstance=a.createInstance,e.createInstance,e.dir,e.init,e.loadResources,e.reloadResources,e.use,e.changeLanguage,e.getFixedT,e.t),e=(e.exists,e.setDefaultNamespace,e.hasLoadedNamespace,e.loadNamespaces,e.loadLanguages,"marketplace"),g={installedExtensions:e+":installed-extensions",installedSnippets:e+":installed-snippets",installedThemes:e+":installed-themes",activeTab:e+":active-tab",tabs:e+":tabs",sort:e+":sort",themeInstalled:e+":theme-installed",localTheme:e+":local-theme",albumArtBasedColor:e+":albumArtBasedColors",albumArtBasedColorMode:e+":albumArtBasedColorsMode",albumArtBasedColorVibrancy:e+":albumArtBasedColorsVibrancy",colorShift:e+":colorShift"},we=100,L=(e,t=0,r=1)=>Se(Le(t,e),r),ke=t=>{t._clipped=!1,t._unclipped=t.slice(0);for(let e=0;e<=3;e++)e<3?((t[e]<0||255<t[e])&&(t._clipped=!0),t[e]=L(t[e],0,255)):3===e&&(t[e]=L(t[e],0,1));return t},xe={};for(ve of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])xe[`[object ${ve}]`]=ve.toLowerCase();function N(e){return xe[Object.prototype.toString.call(e)]||"object"}var p=(t,e=null)=>3<=t.length?Array.prototype.slice.call(t):"object"==N(t[0])&&e?e.split("").filter(e=>void 0!==t[0][e]).map(e=>t[0][e]):t[0],f=e=>{var t;return!(e.length<2)&&"string"==N(e[t=e.length-1])?e[t].toLowerCase():null},{PI:e,min:Se,max:Le}=Math,d=2*e,Ne=e/3,Oe=e/180,Ce=180/e,m={format:{},autodetect:[]},v=class{constructor(...e){if("object"===N(e[0])&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];let t=f(e),r=!1;if(!t){r=!0,m.sorted||(m.autodetect=m.autodetect.sort((e,t)=>t.p-e.p),m.sorted=!0);for(var s of m.autodetect)if(t=s.test(...e))break}if(!m.format[t])throw new Error("unknown format: "+e);var n=m.format[t].apply(null,r?e:e.slice(0,-1));this._rgb=ke(n),3===this._rgb.length&&this._rgb.push(1)}toString(){return"function"==N(this.hex)?this.hex():`[${this._rgb.join(",")}]`}},t=(...e)=>new t.Color(...e),O=(t.Color=v,t.version="2.6.0",t),e=(...e)=>{var[t,r,s,n]=e=p(e,"cmyk"),e=4<e.length?e[4]:1;return 1===n?[0,0,0,e]:[1<=t?0:255*(1-t)*(1-n),1<=r?0:255*(1-r)*(1-n),1<=s?0:255*(1-s)*(1-n),e]},Re=Math["max"],Pe=(...e)=>{var[e,t,r]=p(e,"rgb"),s=1-Re(e/=255,Re(t/=255,r/=255)),n=s<1?1/(1-s):0;return[(1-e-s)*n,(1-t-s)*n,(1-r-s)*n,s]},je=(v.prototype.cmyk=function(){return Pe(this._rgb)},O.cmyk=(...e)=>new v(...e,"cmyk"),m.format.cmyk=e,m.autodetect.push({p:2,test:(...e)=>{if("array"===N(e=p(e,"cmyk"))&&4===e.length)return"cmyk"}}),e=>Math.round(100*e)/100),$e=(...e)=>{var t=p(e,"hsla");let r=f(e)||"lsa";return t[0]=je(t[0]||0),t[1]=je(100*t[1])+"%",t[2]=je(100*t[2])+"%","hsla"===r||3<t.length&&t[3]<1?(t[3]=3<t.length?t[3]:1,r="hsla"):t.length=3,`${r}(${t.join(",")})`},Ee=(...e)=>{var[t,r,s]=e=p(e,"rgba"),n=Se(t/=255,r/=255,s/=255),a=Le(t,r,s),i=(a+n)/2;let o,l;return a===n?(o=0,l=Number.NaN):o=i<.5?(a-n)/(a+n):(a-n)/(2-a-n),t==a?l=(r-s)/(a-n):r==a?l=2+(s-t)/(a-n):s==a&&(l=4+(t-r)/(a-n)),(l*=60)<0&&(l+=360),3<e.length&&void 0!==e[3]?[l,o,i,e[3]]:[l,o,i]},Ae=Math["round"],Ie=(...e)=>{var t=p(e,"rgba");let r=f(e)||"rgb";return"hsl"==r.substr(0,3)?$e(Ee(t),r):(t[0]=Ae(t[0]),t[1]=Ae(t[1]),t[2]=Ae(t[2]),("rgba"===r||3<t.length&&t[3]<1)&&(t[3]=3<t.length?t[3]:1,r="rgba"),`${r}(${t.slice(0,"rgb"===r?3:4).join(",")})`)},Me=Math["round"],_e=(...e)=>{var[t,r,s]=e=p(e,"hsl");let n,a,i;if(0===r)n=a=i=255*s;else{var o=[0,0,0],l=[0,0,0],c=s<.5?s*(1+r):s+r-s*r,u=2*s-c,r=t/360;o[0]=r+1/3,o[1]=r,o[2]=r-1/3;for(let e=0;e<3;e++)o[e]<0&&(o[e]+=1),1<o[e]&&--o[e],6*o[e]<1?l[e]=u+6*(c-u)*o[e]:2*o[e]<1?l[e]=c:3*o[e]<2?l[e]=u+(c-u)*(2/3-o[e])*6:l[e]=u;[n,a,i]=[Me(255*l[0]),Me(255*l[1]),Me(255*l[2])]}return 3<e.length?[n,a,i,e[3]]:[n,a,i,1]},Ue=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,Fe=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,Te=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,De=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Ve=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,Be=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,qe=Math["round"],e=e=>{e=e.toLowerCase().trim();let t;if(m.format.named)try{return m.format.named(e)}catch(e){}if(t=e.match(Ue)){var r=t.slice(1,4);for(let e=0;e<3;e++)r[e]=+r[e];return r[3]=1,r}if(t=e.match(Fe)){var s=t.slice(1,5);for(let e=0;e<4;e++)s[e]=+s[e];return s}if(t=e.match(Te)){var n=t.slice(1,4);for(let e=0;e<3;e++)n[e]=qe(2.55*n[e]);return n[3]=1,n}if(t=e.match(De)){var a=t.slice(1,5);for(let e=0;e<3;e++)a[e]=qe(2.55*a[e]);return a[3]=+a[3],a}var i;return(t=e.match(Ve))?((i=t.slice(1,4))[1]*=.01,i[2]*=.01,(i=_e(i))[3]=1,i):(t=e.match(Be))?((i=t.slice(1,4))[1]*=.01,i[2]*=.01,(e=_e(i))[3]=+t[4],e):void 0},ze=(e.test=e=>Ue.test(e)||Fe.test(e)||Te.test(e)||De.test(e)||Ve.test(e)||Be.test(e),e),Ke=(v.prototype.css=function(e){return Ie(this._rgb,e)},O.css=(...e)=>new v(...e,"css"),m.format.css=ze,m.autodetect.push({p:5,test:(e,...t)=>{if(!t.length&&"string"===N(e)&&ze.test(e))return"css"}}),m.format.gl=(...e)=>{e=p(e,"rgba");return e[0]*=255,e[1]*=255,e[2]*=255,e},O.gl=(...e)=>new v(...e,"gl"),v.prototype.gl=function(){var e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]},Math)["floor"],e=(...e)=>{let[t,r,s]=e=p(e,"hcg"),n,a,i;s*=255;var o=255*r;if(0===r)n=a=i=s;else{360<(t=360===t?0:t)&&(t-=360),t<0&&(t+=360),t/=60;var l=Ke(t),c=t-l,u=s*(1-r),h=u+o*(1-c),f=u+o*c,d=u+o;switch(l){case 0:[n,a,i]=[d,f,u];break;case 1:[n,a,i]=[h,d,u];break;case 2:[n,a,i]=[u,d,f];break;case 3:[n,a,i]=[u,h,d];break;case 4:[n,a,i]=[f,u,d];break;case 5:[n,a,i]=[d,u,h]}}return[n,a,i,3<e.length?e[3]:1]},Je=(...e)=>{var[e,t,r]=p(e,"rgb"),s=Se(e,t,r),n=Le(e,t,r),a=n-s;let i;return 0==a?i=Number.NaN:(e===n&&(i=(t-r)/a),t===n&&(i=2+(r-e)/a),r===n&&(i=4+(e-t)/a),(i*=60)<0&&(i+=360)),[i,100*a/255,s/(255-a)*100]},He=(v.prototype.hcg=function(){return Je(this._rgb)},O.hcg=(...e)=>new v(...e,"hcg"),m.format.hcg=e,m.autodetect.push({p:1,test:(...e)=>{if("array"===N(e=p(e,"hcg"))&&3===e.length)return"hcg"}}),/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/),We=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Ge=e=>{var t;if(e.match(He))return 3===(e=4!==e.length&&7!==e.length?e:e.substr(1)).length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]),[(t=parseInt(e,16))>>16,t>>8&255,255&t,1];if(e.match(We))return 4===(e=5!==e.length&&9!==e.length?e:e.substr(1)).length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),[(t=parseInt(e,16))>>24&255,t>>16&255,t>>8&255,Math.round((255&t)/255*100)/100];throw new Error("unknown hex color: "+e)},y=Math["round"],Ye=(...e)=>{let[t,r,s,n]=p(e,"rgba"),a=f(e)||"auto";void 0===n&&(n=1),"auto"===a&&(a=n<1?"rgba":"rgb");let i="000000"+(y(t)<<16|y(r)<<8|y(s)).toString(16),o=(i=i.substr(i.length-6),"0"+y(255*n).toString(16));switch(o=o.substr(o.length-2),a.toLowerCase()){case"rgba":return"#"+i+o;case"argb":return"#"+o+i;default:return"#"+i}},w=(v.prototype.hex=function(e){return Ye(this._rgb,e)},O.hex=(...e)=>new v(...e,"hex"),m.format.hex=Ge,m.autodetect.push({p:4,test:(e,...t)=>{if(!t.length&&"string"===N(e)&&0<=[3,4,5,6,7,8,9].indexOf(e.length))return"hex"}}),Math)["cos"],e=(...e)=>{let[t,r,s]=e=p(e,"hsi"),n,a,i;return isNaN(t)&&(t=0),isNaN(r)&&(r=0),360<t&&(t-=360),t<0&&(t+=360),(t/=360)<1/3?(i=(1-r)/3,n=(1+r*w(d*t)/w(Ne-d*t))/3,a=1-(i+n)):t<2/3?(t-=1/3,n=(1-r)/3,a=(1+r*w(d*t)/w(Ne-d*t))/3,i=1-(n+a)):(t-=2/3,a=(1-r)/3,i=(1+r*w(d*t)/w(Ne-d*t))/3,n=1-(a+i)),n=L(s*n*3),a=L(s*a*3),i=L(s*i*3),[255*n,255*a,255*i,3<e.length?e[3]:1]},{min:Xe,sqrt:Ze,acos:Qe}=Math,et=(...e)=>{var[e,t,r]=p(e,"rgb");let s;var n=Xe(e/=255,t/=255,r/=255),a=(e+t+r)/3,n=0<a?1-n/a:0;return 0==n?s=NaN:(s=(e-t+(e-r))/2,s/=Ze((e-t)*(e-t)+(e-r)*(t-r)),s=Qe(s),t<r&&(s=d-s),s/=d),[360*s,n,a]},tt=(v.prototype.hsi=function(){return et(this._rgb)},O.hsi=(...e)=>new v(...e,"hsi"),m.format.hsi=e,m.autodetect.push({p:2,test:(...e)=>{if("array"===N(e=p(e,"hsi"))&&3===e.length)return"hsi"}}),v.prototype.hsl=function(){return Ee(this._rgb)},O.hsl=(...e)=>new v(...e,"hsl"),m.format.hsl=_e,m.autodetect.push({p:2,test:(...e)=>{if("array"===N(e=p(e,"hsl"))&&3===e.length)return"hsl"}}),Math)["floor"],e=(...e)=>{let[t,r,s]=e=p(e,"hsv"),n,a,i;if(s*=255,0===r)n=a=i=s;else{360<(t=360===t?0:t)&&(t-=360),t<0&&(t+=360),t/=60;var o=tt(t),l=t-o,c=s*(1-r),u=s*(1-r*l),h=s*(1-r*(1-l));switch(o){case 0:[n,a,i]=[s,h,c];break;case 1:[n,a,i]=[u,s,c];break;case 2:[n,a,i]=[c,s,h];break;case 3:[n,a,i]=[c,u,s];break;case 4:[n,a,i]=[h,c,s];break;case 5:[n,a,i]=[s,c,u]}}return[n,a,i,3<e.length?e[3]:1]},{min:rt,max:st}=Math,nt=(...e)=>{var[e,t,r]=e=p(e,"rgb"),s=rt(e,t,r),n=st(e,t,r),s=n-s;let a,i;return 0===n?(a=Number.NaN,i=0):(i=s/n,e===n&&(a=(t-r)/s),t===n&&(a=2+(r-e)/s),r===n&&(a=4+(e-t)/s),(a*=60)<0&&(a+=360)),[a,i,n/255]},k=(v.prototype.hsv=function(){return nt(this._rgb)},O.hsv=(...e)=>new v(...e,"hsv"),m.format.hsv=e,m.autodetect.push({p:2,test:(...e)=>{if("array"===N(e=p(e,"hsv"))&&3===e.length)return"hsv"}}),{Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452}),at=Math["pow"],it=e=>255*(e<=.00304?12.92*e:1.055*at(e,1/2.4)-.055),ot=e=>e>k.t1?e*e*e:k.t2*(e-k.t0),lt=(...e)=>{var[t,r,s]=e=p(e,"lab"),t=(t+16)/116,r=isNaN(r)?t:t+r/500,s=isNaN(s)?t:t-s/200;return t=k.Yn*ot(t),r=k.Xn*ot(r),s=k.Zn*ot(s),[it(3.2404542*r-1.5371385*t-.4985314*s),it(-.969266*r+1.8760108*t+.041556*s),it(.0556434*r-.2040259*t+1.0572252*s),3<e.length?e[3]:1]},ct=Math["pow"],ut=e=>(e/=255)<=.04045?e/12.92:ct((e+.055)/1.055,2.4),ht=e=>e>k.t3?ct(e,1/3):e/k.t2+k.t0,ft=(...e)=>{var[e,t,r]=p(e,"rgb"),[e,t,r]=((e,t,r)=>{e=ut(e),t=ut(t),r=ut(r);const s=ht((.4124564*e+.3575761*t+.1804375*r)/k.Xn),n=ht((.2126729*e+.7151522*t+.072175*r)/k.Yn),a=ht((.0193339*e+.119192*t+.9503041*r)/k.Zn);return[s,n,a]})(e,t,r),s=116*t-16;return[s<0?0:s,500*(e-t),200*(t-r)]},{sin:dt,cos:pt}=(v.prototype.lab=function(){return ft(this._rgb)},O.lab=(...e)=>new v(...e,"lab"),m.format.lab=lt,m.autodetect.push({p:2,test:(...e)=>{if("array"===N(e=p(e,"lab"))&&3===e.length)return"lab"}}),Math),gt=(...e)=>{let[t,r,s]=p(e,"lch");return isNaN(s)&&(s=0),s*=Oe,[t,pt(s)*r,dt(s)*r]},mt=(...e)=>{var[t,r,s]=e=p(e,"lch"),[t,r,s]=gt(t,r,s),[t,r,s]=lt(t,r,s);return[t,r,s,3<e.length?e[3]:1]},e=(...e)=>{e=p(e,"hcl").reverse();return mt(...e)},{sqrt:bt,atan2:vt,round:yt}=Math,wt=(...e)=>{var[e,t,r]=p(e,"lab"),s=bt(t*t+r*r);let n=(vt(r,t)*Ce+360)%360;return[e,s,n=0===yt(1e4*s)?Number.NaN:n]},kt=(...e)=>{var[e,t,r]=p(e,"rgb"),[e,t,r]=ft(e,t,r);return wt(e,t,r)},s=(v.prototype.lch=function(){return kt(this._rgb)},v.prototype.hcl=function(){return kt(this._rgb).reverse()},O.lch=(...e)=>new v(...e,"lch"),O.hcl=(...e)=>new v(...e,"hcl"),m.format.lch=mt,m.format.hcl=e,["lch","hcl"].forEach(t=>m.autodetect.push({p:2,test:(...e)=>{if("array"===N(e=p(e,t))&&3===e.length)return t}})),{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}),e=(v.prototype.name=function(){var e,t=Ye(this._rgb,"rgb");for(e of Object.keys(s))if(s[e]===t)return e.toLowerCase();return t},m.format.named=e=>{if(e=e.toLowerCase(),s[e])return Ge(s[e]);throw new Error("unknown color name: "+e)},m.autodetect.push({p:5,test:(e,...t)=>{if(!t.length&&"string"===N(e)&&s[e.toLowerCase()])return"named"}}),e=>{if("number"==N(e)&&0<=e&&e<=16777215)return[e>>16,e>>8&255,255&e,1];throw new Error("unknown num color: "+e)}),xt=(...e)=>{var[e,t,r]=p(e,"rgb");return(e<<16)+(t<<8)+r},St=(v.prototype.num=function(){return xt(this._rgb)},O.num=(...e)=>new v(...e,"num"),m.format.num=e,m.autodetect.push({p:5,test:(...e)=>{if(1===e.length&&"number"===N(e[0])&&0<=e[0]&&e[0]<=16777215)return"num"}}),Math)["round"],n=(v.prototype.rgb=function(e=!0){return!1===e?this._rgb.slice(0,3):this._rgb.slice(0,3).map(St)},v.prototype.rgba=function(r=!0){return this._rgb.slice(0,4).map((e,t)=>!(t<3)||!1===r?e:St(e))},O.rgb=(...e)=>new v(...e,"rgb"),m.format.rgb=(...e)=>{e=p(e,"rgba");return void 0===e[3]&&(e[3]=1),e},m.autodetect.push({p:3,test:(...e)=>{if("array"===N(e=p(e,"rgba"))&&(3===e.length||4===e.length&&"number"==N(e[3])&&0<=e[3]&&e[3]<=1))return"rgb"}}),Math)["log"],Lt=e=>{e/=100;let t,r,s;return s=e<66?(t=255,r=e<6?0:-155.25485562709179-.44596950469579133*(r=e-2)+104.49216199393888*n(r),e<20?0:.8274096064007395*(s=e-10)-254.76935184120902+115.67994401066147*n(s)):(t=351.97690566805693+.114206453784165*(t=e-55)-40.25366309332127*n(t),r=325.4494125711974+.07943456536662342*(r=e-50)-28.0852963507957*n(r),255),[t,r,s,1]},Nt=Math["round"],Ot=(...e)=>{var e=p(e,"rgb"),t=e[0],r=e[2];let s=1e3,n=4e4;let a;for(;.4<n-s;){a=.5*(n+s);var i=Lt(a);i[2]/i[0]>=r/t?n=a:s=a}return Nt(a)},{pow:x,sign:Ct}=(v.prototype.temp=v.prototype.kelvin=v.prototype.temperature=function(){return Ot(this._rgb)},O.temp=O.kelvin=O.temperature=(...e)=>new v(...e,"temp"),m.format.temp=m.format.kelvin=m.format.temperature=Lt,Math),Rt=(...e)=>{var[t,r,s]=e=p(e,"lab"),n=x(t+.3963377774*r+.2158037573*s,3),a=x(t-.1055613458*r-.0638541728*s,3),t=x(t-.0894841775*r-1.291485548*s,3);return[255*Pt(4.0767416621*n-3.3077115913*a+.2309699292*t),255*Pt(-1.2684380046*n+2.6097574011*a-.3413193965*t),255*Pt(-.0041960863*n-.7034186147*a+1.707614701*t),3<e.length?e[3]:1]};function Pt(e){var t=Math.abs(e);return.0031308<t?(Ct(e)||1)*(1.055*x(t,1/2.4)-.055):12.92*e}var{cbrt:jt,pow:$t,sign:Et}=Math,At=(...e)=>{var[e,t,r]=p(e,"rgb"),[e,t,r]=[It(e/255),It(t/255),It(r/255)],s=jt(.4122214708*e+.5363325363*t+.0514459929*r),n=jt(.2119034982*e+.6806995451*t+.1073969566*r),e=jt(.0883024619*e+.2817188376*t+.6299787005*r);return[.2104542553*s+.793617785*n-.0040720468*e,1.9779984951*s-2.428592205*n+.4505937099*e,.0259040371*s+.7827717662*n-.808675766*e]};function It(e){var t=Math.abs(e);return t<.04045?e/12.92:(Et(e)||1)*$t((t+.055)/1.055,2.4)}v.prototype.oklab=function(){return At(this._rgb)},O.oklab=(...e)=>new v(...e,"oklab"),m.format.oklab=Rt,m.autodetect.push({p:3,test:(...e)=>{if("array"===N(e=p(e,"oklab"))&&3===e.length)return"oklab"}});var e=(...e)=>{var[t,r,s]=e=p(e,"lch"),[t,r,s]=gt(t,r,s),[t,r,s]=Rt(t,r,s);return[t,r,s,3<e.length?e[3]:1]},Mt=(...e)=>{var[e,t,r]=p(e,"rgb"),[e,t,r]=At(e,t,r);return wt(e,t,r)},_t=(v.prototype.oklch=function(){return Mt(this._rgb)},O.oklch=(...e)=>new v(...e,"oklch"),m.format.oklch=e,m.autodetect.push({p:3,test:(...e)=>{if("array"===N(e=p(e,"oklch"))&&3===e.length)return"oklch"}}),v.prototype.alpha=function(e,t=!1){return void 0!==e&&"number"===N(e)?t?(this._rgb[3]=e,this):new v([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]},v.prototype.clipped=function(){return this._rgb._clipped||!1},v.prototype.darken=function(e=1){var t=this.lab();return t[0]-=k.Kn*e,new v(t,"lab").alpha(this.alpha(),!0)},v.prototype.brighten=function(e=1){return this.darken(-e)},v.prototype.darker=v.prototype.darken,v.prototype.brighter=v.prototype.brighten,v.prototype.get=function(e){var[e,t]=e.split("."),r=this[e]();if(t){var s=e.indexOf(t)-("ok"===e.substr(0,2)?2:0);if(-1<s)return r[s];throw new Error(`unknown channel ${t} in mode `+e)}return r},Math)["pow"],Ut=(v.prototype.luminance=function(a,i="rgb"){if(void 0===a||"number"!==N(a))return Ut(...this._rgb.slice(0,3));{if(0===a)return new v([0,0,0,this._rgb[3]],"rgb");if(1===a)return new v([255,255,255,this._rgb[3]],"rgb");var e=this.luminance();let n=20;const o=(e,t)=>{var r=e.interpolate(t,.5,i),s=r.luminance();return Math.abs(a-s)<1e-7||!n--?r:a<s?o(e,r):o(r,t)};e=(a<e?o(new v([0,0,0]),this):o(this,new v([255,255,255]))).rgb();return new v([...e,this._rgb[3]])}},(e,t,r)=>.2126*(e=Ft(e))+.7152*(t=Ft(t))+.0722*(r=Ft(r))),Ft=e=>(e/=255)<=.03928?e/12.92:_t((e+.055)/1.055,2.4),S={},C=(e,t,r=.5,...s)=>{let n=s[0]||"lrgb";if(S[n]||s.length||(n=Object.keys(S)[0]),S[n])return"object"!==N(e)&&(e=new v(e)),"object"!==N(t)&&(t=new v(t)),S[n](e,t,r).alpha(e.alpha()+r*(t.alpha()-e.alpha()));throw new Error(`interpolation mode ${n} is not defined`)},{sqrt:Tt,pow:R}=(v.prototype.mix=v.prototype.interpolate=function(e,t=.5,...r){return C(this,e,t,...r)},v.prototype.premultiply=function(e=!1){var t=this._rgb,r=t[3];return e?(this._rgb=[t[0]*r,t[1]*r,t[2]*r,r],this):new v([t[0]*r,t[1]*r,t[2]*r,r],"rgb")},v.prototype.saturate=function(e=1){var t=this.lch();return t[1]+=k.Kn*e,t[1]<0&&(t[1]=0),new v(t,"lch").alpha(this.alpha(),!0)},v.prototype.desaturate=function(e=1){return this.saturate(-e)},v.prototype.set=function(e,t,r=!1){var[e,s]=e.split("."),n=this[e]();if(s){var a=e.indexOf(s)-("ok"===e.substr(0,2)?2:0);if(-1<a){if("string"==N(t))switch(t.charAt(0)){case"+":case"-":n[a]+=+t;break;case"*":n[a]*=+t.substr(1);break;case"/":n[a]/=+t.substr(1);break;default:n[a]=+t}else{if("number"!==N(t))throw new Error("unsupported value for Color.set");n[a]=t}var i=new v(n,e);return r?(this._rgb=i._rgb,this):i}throw new Error(`unknown channel ${s} in mode `+e)}return n},v.prototype.tint=function(e=.5,...t){return C(this,"white",e,...t)},v.prototype.shade=function(e=.5,...t){return C(this,"black",e,...t)},S.rgb=(e,t,r)=>{e=e._rgb,t=t._rgb;return new v(e[0]+r*(t[0]-e[0]),e[1]+r*(t[1]-e[1]),e[2]+r*(t[2]-e[2]),"rgb")},Math),P=(S.lrgb=(e,t,r)=>{var[e,s,n]=e._rgb,[t,a,i]=t._rgb;return new v(Tt(R(e,2)*(1-r)+R(t,2)*r),Tt(R(s,2)*(1-r)+R(a,2)*r),Tt(R(n,2)*(1-r)+R(i,2)*r),"rgb")},S.lab=(e,t,r)=>{e=e.lab(),t=t.lab();return new v(e[0]+r*(t[0]-e[0]),e[1]+r*(t[1]-e[1]),e[2]+r*(t[2]-e[2]),"lab")},(e,t,r,s)=>{let n,a;"hsl"===s?(n=e.hsl(),a=t.hsl()):"hsv"===s?(n=e.hsv(),a=t.hsv()):"hcg"===s?(n=e.hcg(),a=t.hcg()):"hsi"===s?(n=e.hsi(),a=t.hsi()):"lch"===s||"hcl"===s?(s="hcl",n=e.hcl(),a=t.hcl()):"oklch"===s&&(n=e.oklch().reverse(),a=t.oklch().reverse());let i,o,l,c,u,h;"h"!==s.substr(0,1)&&"oklch"!==s||([i,l,u]=n,[o,c,h]=a);let f,d,p,g;return isNaN(i)||isNaN(o)?isNaN(i)?isNaN(o)?d=Number.NaN:(d=o,1!=u&&0!=u||"hsv"==s||(f=c)):(d=i,1!=h&&0!=h||"hsv"==s||(f=l)):(g=o>i&&180<o-i?o-(i+360):o<i&&180<i-o?o+360-i:o-i,d=i+r*g),void 0===f&&(f=l+r*(c-l)),p=u+r*(h-u),new v("oklch"===s?[p,f,d]:[d,f,p],s)}),e=(e,t,r)=>P(e,t,r,"lch"),{pow:Dt,sqrt:Vt,PI:Bt,cos:qt,sin:zt,atan2:Kt}=(S.lch=e,S.hcl=e,S.num=(e,t,r)=>{e=e.num(),t=t.num();return new v(e+r*(t-e),"num")},S.hcg=(e,t,r)=>P(e,t,r,"hcg"),S.hsi=(e,t,r)=>P(e,t,r,"hsi"),S.hsl=(e,t,r)=>P(e,t,r,"hsl"),S.hsv=(e,t,r)=>P(e,t,r,"hsv"),S.oklab=(e,t,r)=>{e=e.oklab(),t=t.oklab();return new v(e[0]+r*(t[0]-e[0]),e[1]+r*(t[1]-e[1]),e[2]+r*(t[2]-e[2]),"oklab")},S.oklch=(e,t,r)=>P(e,t,r,"oklch"),Math),Jt=Math["pow"];function j(a){let i="rgb",o=O("#ccc"),t=0,l=[0,1],c=[],u=[0,0],h=!1,f=[],r=!1,d=0,p=1,s,g={},m=!0,b=1;function n(t){if((t=t||["#fff","#000"])&&"string"===N(t)&&O.brewer&&O.brewer[t.toLowerCase()]&&(t=O.brewer[t.toLowerCase()]),"array"===N(t)){t=(t=1===t.length?[t[0],t[0]]:t).slice(0);for(let e=0;e<t.length;e++)t[e]=O(t[e]);for(let e=c.length=0;e<t.length;e++)c.push(e/(t.length-1))}x(),f=t}const v=function(t){if(null==h)return 0;{var r=h.length-1;let e=0;for(;e<r&&t>=h[e];)e++;return e-1}};let y=e=>e,w=e=>e;function k(e,t){let r,s;if(null==t&&(t=!1),isNaN(e)||null===e)return o;if(s=t?e:h&&2<h.length?v(e)/(h.length-2):p!==d?(e-d)/(p-d):1,s=w(s),t||(s=y(s)),1!==b&&(s=Jt(s,b)),s=u[0]+s*(1-u[0]-u[1]),s=L(s,0,1),e=Math.floor(1e4*s),m&&g[e])r=g[e];else{if("array"===N(f))for(let e=0;e<c.length;e++){var n=c[e];if(s<=n){r=f[e];break}if(s>=n&&e===c.length-1){r=f[e];break}if(s>n&&s<c[e+1]){s=(s-n)/(c[e+1]-n),r=O.interpolate(f[e],f[e+1],s,i);break}}else"function"===N(f)&&(r=f(s));m&&(g[e]=r)}return r}var x=()=>g={};n(a);function S(e){return e=O(k(e)),r&&e[r]?e[r]():e}return S.classes=function(e){var t;return null!=e?("array"===N(e)?(h=e,l=[e[0],e[e.length-1]]):(t=O.analyze(l),h=0===e?[t.min,t.max]:O.limits(t,"e",e)),S):h},S.domain=function(r){if(!arguments.length)return l;d=r[0],p=r[r.length-1],c=[];var t=f.length;if(r.length===t&&d!==p)for(var e of Array.from(r))c.push((e-d)/(p-d));else{for(let e=0;e<t;e++)c.push(e/(t-1));if(2<r.length){const s=r.map((e,t)=>t/(r.length-1)),n=r.map(e=>(e-d)/(p-d));n.every((e,t)=>s[t]===e)||(w=e=>{if(e<=0||1<=e)return e;let t=0;for(;e>=n[t+1];)t++;var r=(e-n[t])/(n[t+1]-n[t]);return s[t]+r*(s[t+1]-s[t])})}}return l=[d,p],S},S.mode=function(e){return arguments.length?(i=e,x(),S):i},S.range=function(e,t){return n(e),S},S.out=function(e){return r=e,S},S.spread=function(e){return arguments.length?(t=e,S):t},S.correctLightness=function(e){return null==e&&(e=!0),s=e,x(),y=s?function(e){var t=k(0,!0).lab()[0],r=k(1,!0).lab()[0];const s=r<t;let n=k(e,!0).lab()[0];const a=t+(r-t)*e;let i=n-a,o=0,l=1,c=20;for(;.01<Math.abs(i)&&0<c--;)s&&(i*=-1),i<0?(o=e,e+=.5*(l-e)):(l=e,e+=.5*(o-e)),n=k(e,!0).lab()[0],i=n-a;return e}:e=>e,S},S.padding=function(e){return null!=e?("number"===N(e)&&(e=[e,e]),u=e,S):u},S.colors=function(t,r){arguments.length<2&&(r="hex");let e=[];if(0===arguments.length)e=f.slice(0);else if(1===t)e=[S(.5)];else if(1<t){const s=l[0],n=l[1]-s;e=function(t,e,r){var s=[],n=t<e,a=r?n?e+1:e-1:e;for(let e=t;n?e<a:e>a;n?e++:e--)s.push(e);return s}(0,t,!1).map(e=>S(s+e/(t-1)*n))}else{a=[];let s=[];if(h&&2<h.length)for(let e=1,t=h.length,r=1<=t;r?e<t:e>t;r?e++:e--)s.push(.5*(h[e-1]+h[e]));else s=l;e=s.map(e=>S(e))}return e=O[r]?e.map(e=>e[r]()):e},S.cache=function(e){return null!=e?(m=e,S):m},S.gamma=function(e){return null!=e?(b=e,S):b},S.nodata=function(e){return null!=e?(o=O(e),S):o},S}var Ht=function(t){let r=[1,1];for(let e=1;e<t;e++){var s=[1];for(let e=1;e<=r.length;e++)s[e]=(r[e]||0)+r[e-1];r=s}return r},$=(e,t,r)=>{if($[r])return $[r](e,t);throw new Error("unknown blend mode "+r)},e=r=>(e,t)=>{t=O(t).rgb(),e=O(e).rgb();return O.rgb(r(t,e))},E=s=>(e,t)=>{var r=[];return r[0]=s(e[0],t[0]),r[1]=s(e[1],t[1]),r[2]=s(e[2],t[2]),r},e=($.normal=e(E(e=>e)),$.multiply=e(E((e,t)=>e*t/255)),$.screen=e(E((e,t)=>255*(1-(1-e/255)*(1-t/255)))),$.overlay=e(E((e,t)=>t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255)))),$.darken=e(E((e,t)=>t<e?t:e)),$.lighten=e(E((e,t)=>t<e?e:t)),$.dodge=e(E((e,t)=>255===e||255<(e=t/255*255/(1-e/255))?255:e)),$.burn=e(E((e,t)=>255*(1-(1-t/255)/(e/255)))),$),{pow:Wt,sin:Gt,cos:Yt}=Math;var{floor:Xt,random:Zt}=Math,{log:Qt,pow:er,floor:tr,abs:rr}=Math;function sr(e,t=null){const r={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return(e="object"===N(e)?Object.values(e):e).forEach(e=>{null==(e=t&&"object"===N(e)?e[t]:e)||isNaN(e)||(r.values.push(e),r.sum+=e,e<r.min&&(r.min=e),e>r.max&&(r.max=e),r.count+=1)}),r.domain=[r.min,r.max],r.limits=(e,t)=>nr(r,e,t),r}function nr(e,t="equal",a=7){var{min:i,max:o}=e="array"==N(e)?sr(e):e,l=e.values.sort((e,t)=>e-t);if(1===a)return[i,o];var c=[];if("c"===t.substr(0,1)&&(c.push(i),c.push(o)),"e"===t.substr(0,1)){c.push(i);for(let e=1;e<a;e++)c.push(i+e/a*(o-i));c.push(o)}else if("l"===t.substr(0,1)){if(i<=0)throw new Error("Logarithmic scales are only possible for values > 0");var r=Math.LOG10E*Qt(i),s=Math.LOG10E*Qt(o);c.push(i);for(let e=1;e<a;e++)c.push(er(10,r+e/a*(s-r)));c.push(o)}else if("q"===t.substr(0,1)){c.push(i);for(let e=1;e<a;e++){var n=(l.length-1)*e/a,u=tr(n);c.push(u===n?l[u]:l[u]*(1-(n=n-u))+l[u+1]*n)}c.push(o)}else if("k"===t.substr(0,1)){let t;var h=l.length,f=new Array(h),d=new Array(a);let r=!0,e=0,n=null;(n=[]).push(i);for(let e=1;e<a;e++)n.push(i+e/a*(o-i));for(n.push(o);r;){for(let e=0;e<a;e++)d[e]=0;for(let s=0;s<h;s++){var p=l[s];let t=Number.MAX_VALUE,r;for(let e=0;e<a;e++){var g=rr(n[e]-p);g<t&&(t=g,r=e),d[r]++,f[s]=r}}var m=new Array(a);for(let e=0;e<a;e++)m[e]=null;for(let e=0;e<h;e++)null===m[t=f[e]]?m[t]=l[e]:m[t]+=l[e];for(let e=0;e<a;e++)m[e]*=1/d[e];r=!1;for(let e=0;e<a;e++)if(m[e]!==n[e]){r=!0;break}n=m,200<++e&&(r=!1)}var b={};for(let e=0;e<a;e++)b[e]=[];for(let e=0;e<h;e++)b[t=f[e]].push(l[e]);let s=[];for(let e=0;e<a;e++)s.push(b[e][0]),s.push(b[e][b[e].length-1]);s=s.sort((e,t)=>e-t),c.push(s[0]);for(let e=1;e<s.length;e+=2){var v=s[e];isNaN(v)||-1!==c.indexOf(v)||c.push(v)}}return c}var{sqrt:A,pow:I,min:ar,max:ir,atan2:or,abs:lr,cos:cr,sin:ur,exp:hr,PI:fr}=Math;var dr,E={cool(){return j([O.hsl(180,1,.9),O.hsl(250,.7,.4)])},hot(){return j(["#000","#f00","#ff0","#fff"]).mode("rgb")}},pr={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]};for(dr of Object.keys(pr))pr[dr.toLowerCase()]=pr[dr];Object.assign(O,{average:(e,o="lrgb",l=null)=>{var t=e.length;const r=t/(l=l||Array.from(new Array(t)).map(()=>1)).reduce(function(e,t){return e+t});if(l.forEach((e,t)=>{l[t]*=r}),e=e.map(e=>new v(e)),"lrgb"===o){var s=e,n=l,a=s.length,i=[0,0,0,0];for(let e=0;e<s.length;e++){var c=s[e],u=n[e]/a,c=c._rgb;i[0]+=Dt(c[0],2)*u,i[1]+=Dt(c[1],2)*u,i[2]+=Dt(c[2],2)*u,i[3]+=c[3]*u}return i[0]=Vt(i[0]),i[1]=Vt(i[1]),i[2]=Vt(i[2]),.9999999<i[3]&&(i[3]=1),new v(ke(i))}{var h,f=e.shift();const d=f.get(o),p=[];let n=0,a=0;for(let e=0;e<d.length;e++)d[e]=(d[e]||0)*l[0],p.push(isNaN(d[e])?0:l[0]),"h"!==o.charAt(e)||isNaN(d[e])||(h=d[e]/180*Bt,n+=qt(h)*l[0],a+=zt(h)*l[0]);let i=f.alpha()*l[0];e.forEach((e,t)=>{var r,s=e.get(o);i+=e.alpha()*l[t+1];for(let e=0;e<d.length;e++)isNaN(s[e])||(p[e]+=l[t+1],"h"===o.charAt(e)?(r=s[e]/180*Bt,n+=qt(r)*l[t+1],a+=zt(r)*l[t+1]):d[e]+=s[e]*l[t+1])});for(let t=0;t<d.length;t++)if("h"===o.charAt(t)){let e=Kt(a/p[t],n/p[t])/Bt*180;for(;e<0;)e+=360;for(;360<=e;)e-=360;d[t]=e}else d[t]=d[t]/p[t];return i/=t,new v(d,o).alpha(.99999<i?1:i,!0)}},bezier:e=>{const t=function(e){let s,n,a,i;if(2===(e=e.map(e=>new v(e))).length)[n,a]=e.map(e=>e.lab()),s=function(t){var e=[0,1,2].map(e=>n[e]+t*(a[e]-n[e]));return new v(e,"lab")};else if(3===e.length)[n,a,i]=e.map(e=>e.lab()),s=function(t){var e=[0,1,2].map(e=>(1-t)*(1-t)*n[e]+2*(1-t)*t*a[e]+t*t*i[e]);return new v(e,"lab")};else if(4===e.length){let r;[n,a,i,r]=e.map(e=>e.lab()),s=function(t){var e=[0,1,2].map(e=>(1-t)*(1-t)*(1-t)*n[e]+3*(1-t)*(1-t)*t*a[e]+3*(1-t)*t*t*i[e]+t*t*t*r[e]);return new v(e,"lab")}}else{if(!(5<=e.length))throw new RangeError("No point in running bezier with only one color.");{let t,i,o;t=e.map(e=>e.lab()),o=e.length-1,i=Ht(o),s=function(n){const a=1-n;var e=[0,1,2].map(s=>t.reduce((e,t,r)=>e+i[r]*a**(o-r)*n**r*t[s],0));return new v(e,"lab")}}}return s}(e);return t.scale=()=>j(t),t},blend:e,cubehelix:function(n=300,a=-1.5,i=1,o=1,l=[0,1]){let c=0,u;function t(e){var t=d*((n+120)/360+a*e),r=Wt(l[0]+u*e,o),e=(0!==c?i[0]+e*c:i)*r*(1-r)/2,s=Yt(t),t=Gt(t);return O(ke([255*(r+e*(-.14861*s+1.78277*t)),255*(r+e*(-.29227*s-.90649*t)),255*(r+1.97294*s*e),1]))}return"array"===N(l)?u=l[1]-l[0]:(u=0,l=[l,l]),t.start=function(e){return null==e?n:(n=e,t)},t.rotations=function(e){return null==e?a:(a=e,t)},t.gamma=function(e){return null==e?o:(o=e,t)},t.hue=function(e){return null==e?i:("array"===N(i=e)?0===(c=i[1]-i[0])&&(i=i[1]):c=0,t)},t.lightness=function(e){return null==e?l:(u="array"===N(e)?(l=e)[1]-e[0]:(l=[e,e],0),t)},t.scale=()=>O.scale(t),t.hue(i),t},mix:C,interpolate:C,random:()=>{let t="#";for(let e=0;e<6;e++)t+="0123456789abcdef".charAt(Xt(16*Zt()));return new v(t,"hex")},scale:j,analyze:sr,contrast:(e,t)=>{e=new v(e),t=new v(t);e=e.luminance(),t=t.luminance();return t<e?(e+.05)/(t+.05):(t+.05)/(e+.05)},deltaE:function(e,t,r=1,s=1,n=1){function a(e){return 360*e/(2*fr)}function i(e){return 2*fr*e/360}e=new v(e),t=new v(t);var[e,o,l]=Array.from(e.lab()),[t,c,u]=Array.from(t.lab()),h=(e+t)/2,f=(A(I(o,2)+I(l,2))+A(I(c,2)+I(u,2)))/2,f=.5*(1-A(I(f,7)/(I(f,7)+I(25,7)))),c=c*(1+f),f=A(I(o=o*(1+f),2)+I(l,2)),d=A(I(c,2)+I(u,2)),p=(f+d)/2,l=a(or(l,o)),o=a(or(u,c)),l=180<lr((u=0<=l?l:l+360)-(c=0<=o?o:o+360))?(u+c+360)/2:(u+c)/2,o=1-.17*cr(i(l-30))+.24*cr(i(2*l))+.32*cr(i(3*l+6))-.2*cr(i(4*l-63)),g=lr(g=c-u)<=180?g:c<=u?360+g:g-360,c=(g=2*A(f*d)*ur(i(g)/2),t-e),u=d-f,t=1+.015*I(h-50,2)/A(20+I(h-50,2)),e=1+.045*p,d=1+.015*p*o,f=30*hr(-I((l-275)/25,2)),h=-(2*A(I(p,7)/(I(p,7)+I(25,7))))*ur(2*i(f)),o=A(I(c/(r*t),2)+I(u/(s*e),2)+I(g/(n*d),2)+u/(s*e)*h*(g/(n*d)));return ir(0,ar(100,o))},distance:function(e,t,r="lab"){e=new v(e),t=new v(t);var s,n=e.get(r),a=t.get(r);let i=0;for(s in n){var o=(n[s]||0)-(a[s]||0);i+=o*o}return Math.sqrt(i)},limits:nr,valid:(...e)=>{try{return new v(...e),!0}catch(e){return!1}},scales:E,input:m,colors:s,brewer:pr});var gr=O,M=(t,e)=>{t=localStorage.getItem(t);if(!t)return e;try{return JSON.parse(t)}catch(e){return t}},mr=e=>{e=3===e.length?e.split("").map(e=>e+e).join(""):e;if(6!==e.length)throw"Only 3- or 6-digit hex colours are allowed.";if(e.match(/[^0-9a-f]/i))throw"Only hex colours are allowed.";e=e.match(/.{1,2}/g);if(e&&3===e.length)return[Number.parseInt(e[0],16),Number.parseInt(e[1],16),Number.parseInt(e[2],16)];throw"Could not parse hex colour."},br=(e,t)=>{let r=[];return e&&0<e.length?r=e.map(e=>({name:e.name,url:Cr(e.url)})):r.push({name:t,url:"https://github.com/"+t}),r},vr=(...e)=>{console.debug("Resetting Marketplace");var t=[];if(0===e.length)for(const r in localStorage)r.startsWith("marketplace:")&&t.push(r);for(const s of e)switch(s){case"extensions":t.push(...M(g.installedExtensions,[])),t.push(g.installedExtensions);break;case"snippets":t.push(...M(g.installedSnippets,[])),t.push(g.installedSnippets);break;case"theme":t.push(...M(g.installedThemes,[])),t.push(g.installedThemes),t.push(g.themeInstalled);break;default:console.error("Unknown category: "+s)}for(const n of t)localStorage.removeItem(n),console.debug("Removed "+n);console.debug("Marketplace has been reset"),location.reload()},yr=()=>{var e={};for(const t in localStorage)t.startsWith("marketplace:")&&(e[t]=localStorage.getItem(t));return e},wr=t=>{var r=document.querySelector("style.marketplaceCSS.marketplaceScheme");if(r&&r.remove(),t){r=document.createElement("style");r.classList.add("marketplaceCSS"),r.classList.add("marketplaceScheme");let e=":root {";for(const s of Object.keys(t))e=(e+=`--spice-${s}: #${t[s]};`)+`--spice-rgb-${s}: ${mr(t[s])};`;e+="}",r.innerHTML=e,document.body.appendChild(r)}},kr=async e=>{let t=M(g.albumArtBasedColorVibrancy);return t=t.replace(/([A-Z])/g,"_$1").toUpperCase(),(await Spicetify.colorExtractor(e))[t].substring(1)},xr=async(e,t)=>{var r=M(g.albumArtBasedColorMode).replace(/([A-Z])/g,"-$1").toLowerCase();return(await fetch(`https://www.thecolorapi.com/scheme?hex=${e}&mode=${r}&count=`+t).then(e=>e.json())).colors.map(e=>e.hex.value.substring(1))};var Sr=f=>{Spicetify.Player.addEventListener("songchange",async()=>{var t;t=1e3,await new Promise(e=>setTimeout(e,t));let r=Spicetify.Player.data?.item?.metadata?.image_xlarge_url;if(r=null==r?await new Promise(t=>{setInterval(()=>{var e=Spicetify.Player.data?.item?.metadata?.image_xlarge_url;e&&t(e)},50)}):r){var s,n,a=new Set(Object.values(f)).size,i=await kr(r),o=await xr(i,a);let e=new Map;for([s,n]of Object.entries(f))e.has(n)?e.get(n).push(s):e.set(n,[s]);var l,i=new Map([...e.entries()].sort((e,t)=>{e=gr(e[0]),t=gr(t[0]);return e.get("lab.l")-t.get("lab.l")})),c={};for([,l]of(e=i).entries()){var u=o.shift();if(u)for(const h of l)c[h]=u}wr(c)}})},Lr=e=>{e=new URL(e);return e.host,"raw.githubusercontent.com"===e.host},Nr=e=>{e=e.match(/https:\/\/raw\.githubusercontent\.com\/(?<user>[^/]+)\/(?<repo>[^/]+)\/(?<branch>[^/]+)\/(?<filePath>.+$)/);return{user:e?e.groups?.user:null,repo:e?e.groups?.repo:null,branch:e?e.groups?.branch:null,filePath:e?e.groups?.filePath:null}};function Or(e,t){if(e)for(const n of e){var r=t||n.user+"-"+n.repo,s=window.sessionStorage.getItem(r),s=s?JSON.parse(s):[];s.push(n),window.sessionStorage.setItem(r,JSON.stringify(s))}}var Cr=e=>{var t=decodeURI(e).trim().toLowerCase();return t.startsWith("javascript:")||t.startsWith("data:")||t.startsWith("vbscript:")?"about:blank":e},Rr=e=>{e&&(e=e.split("/").pop())&&-1===Spicetify.Config.extensions.indexOf(e)&&Spicetify.Config.extensions.push(e)};async function Pr(){for(const e of["net","xyz"])try{if("opaqueredirect"===(await fetch("https://cdn.jsdelivr."+e,{redirect:"manual",cache:"no-cache"})).type)return e}catch(e){console.error(e)}}var e=new Blob([`
  self.addEventListener('message', async (event) => {
    const url = event.data;
    const response = await fetch(url);
    const data = await response.json().catch(() => null);
    self.postMessage(data);
  });
`],{type:"application/javascript"}),jr=URL.createObjectURL(e);async function $r(e,t,r){var s=e+"-"+t,n=window.sessionStorage.getItem(s),a=JSON.parse(window.sessionStorage.getItem("noManifests")||"[]");if(n)return JSON.parse(n);n=`https://raw.githubusercontent.com/${e}/${t}/${r}/manifest.json`;if(a.includes(n))return null;let i=await async function(e){const s=new Worker(jr);return new Promise(t=>{const r=e=>{s.terminate(),t(e)};s.postMessage(e),s.addEventListener("message",e=>r(e.data),{once:!0}),s.addEventListener("error",()=>r(null),{once:!0})})}(n);return i?(Or(i=Array.isArray(i)?i:[i],s),i):Or([n],"noManifests")}async function Er(e,t){var r=await async function(e,t=1){const r=window.sessionStorage.getItem("marketplace:blacklist");let s=`https://api.github.com/search/repositories?per_page=${we}&q=`+encodeURIComponent(`topic:spicetify-${e}s`);t&&(s+="&page="+t);var n=JSON.parse(window.sessionStorage.getItem(`spicetify-${e}s-page-`+t)||"null")||await fetch(s).then(e=>e.json()).catch(()=>null);return n?.items?(window.sessionStorage.setItem(`spicetify-${e}s-page-`+t,JSON.stringify(n)),{...n,page_count:n.items.length,items:n.items.filter(e=>!r?.includes(e.html_url))}):(Spicetify.showNotification(ye("notifications.tooManyRequests"),!0,5e3),{items:[]})}(e,t),s=(!async function(e,t){for(const r of e.items)"theme"===t?await async function(e,s,n){try{var t=e.match(/https:\/\/api\.github\.com\/repos\/(?<user>.+)\/(?<repo>.+)\/contents/);if(!t||!t.groups)return;const{user:a,repo:i}=t.groups;return(await $r(a,i,s)).reduce((e,t)=>{var r;return t?.name&&t?.usercss&&t?.description&&(r=t.branch||s,r={manifest:t,title:t.name,subtitle:t.description,authors:br(t.authors,a),user:a,repo:i,branch:r,imageURL:t.preview?.startsWith("http")?t.preview:`https://raw.githubusercontent.com/${a}/${i}/${r}/`+t.preview,readmeURL:t.readme?.startsWith("http")?t.readme:`https://raw.githubusercontent.com/${a}/${i}/${r}/`+t.readme,stars:n,tags:t.tags,cssURL:t.usercss.startsWith("http")?t.usercss:`https://raw.githubusercontent.com/${a}/${i}/${r}/`+t.usercss,schemesURL:t.schemes?t.schemes.startsWith("http")?t.schemes:`https://raw.githubusercontent.com/${a}/${i}/${r}/`+t.schemes:null,include:t.include},e.push(r)),e},[])}catch{return}}(r.contents_url,r.default_branch,r.stargazers_count):"extension"===t?await async function(e,s,n,a=!1){try{var t=e.match(/https:\/\/api\.github\.com\/repos\/(?<user>.+)\/(?<repo>.+)\/contents/);if(!t||!t.groups)return;const{user:i,repo:o}=t.groups;return(await $r(i,o,s)).reduce((e,t)=>{var r;return t?.name&&t.description&&t.main&&(r=t.branch||s,r={manifest:t,title:t.name,subtitle:t.description,authors:br(t.authors,i),user:i,repo:o,branch:r,imageURL:t.preview?.startsWith("http")?t.preview:`https://raw.githubusercontent.com/${i}/${o}/${r}/`+t.preview,extensionURL:t.main.startsWith("http")?t.main:`https://raw.githubusercontent.com/${i}/${o}/${r}/`+t.main,readmeURL:t.readme?.startsWith("http")?t.readme:`https://raw.githubusercontent.com/${i}/${o}/${r}/`+t.readme,stars:n,tags:t.tags},a&&localStorage.getItem(`marketplace:installed:${i}/${o}/`+t.main)||e.push(r)),e},[])}catch{return}}(r.contents_url,r.default_branch,r.stargazers_count):"app"===t&&await async function(e,s,n){try{var t=e.match(/https:\/\/api\.github\.com\/repos\/(?<user>.+)\/(?<repo>.+)\/contents/);if(!t||!t.groups)return;const{user:a,repo:i}=t.groups;return(await $r(a,i,s)).reduce((e,t)=>{var r;return t?.name&&t.description&&!t.main&&!t.usercss&&(r=t.branch||s,r={manifest:t,title:t.name,subtitle:t.description,authors:br(t.authors,a),user:a,repo:i,branch:r,imageURL:t.preview?.startsWith("http")?t.preview:`https://raw.githubusercontent.com/${a}/${i}/${r}/`+t.preview,readmeURL:t.readme?.startsWith("http")?t.readme:`https://raw.githubusercontent.com/${a}/${i}/${r}/`+t.readme,stars:n,tags:t.tags},e.push(r)),e},[])}catch{return}}(r.contents_url,r.default_branch,r.stargazers_count)}(r,e),we*t+r.page_count),n=(console.debug({pageOfRepos:r}),r.total_count-s);if(console.debug(`Parsed ${s}/${r.total_count} ${e}s`),0<n)return Er(e,t+1);console.debug(`No more ${e} results`)}!async function e(){if(Spicetify.LocalStorage&&Spicetify.showNotification){var t=document.createElement("script");t.innerHTML="const global = globalThis;",document.body.appendChild(t),console.log("Initializing Spicetify Marketplace v1.0.2"),window.Marketplace={reset:vr,export:yr,version:"1.0.2"};const p=await Pr();t=async t=>{t=M(t);if(t){if(console.debug("Initializing theme: ",t),t.schemes){var e=t.schemes[t.activeScheme];if(wr(e),Spicetify.Config.color_scheme=t.activeScheme,"true"===localStorage.getItem(g.albumArtBasedColor))Sr(e);else if("true"===localStorage.getItem(g.colorShift)){var r=t.schemes;let e=0;const f=Object.keys(r).length;setInterval(()=>{e%=f,wr(Object.values(r)[e]),e++},6e4)}}else console.warn("No schemes found for theme");e=document.querySelector("link.marketplaceCSS"),e=(e&&e.remove(),await(async(e,t)=>{if(!e.cssURL)throw new Error("No CSS URL provided");var t=t||await Pr(),t=Lr(e.cssURL)?`https://cdn.jsdelivr.${t}/gh/${e.user}/${e.repo}@${e.branch}/`+e.manifest.usercss:e.cssURL,r=t.replace("/user.css","/assets/");console.debug("Parsing CSS: ",t);let s=await fetch(t+"?time="+Date.now()).then(e=>e.text());for(const i of s.matchAll(/url\(['|"](?<path>.+?)['|"]\)/gm)||[]){var n,a=i?.groups?.path;!a||a.startsWith("http")||a.startsWith("data")||(n=r+a.replace(/\.\//g,""),s=s.replace(a,n))}return s})(t,p));try{var s,n,a=document.querySelector("link[href='user.css']"),i=(a&&a.remove(),document.querySelector("style.marketplaceCSS.marketplaceUserCSS"));i&&i.remove(),e?((s=document.createElement("style")).classList.add("marketplaceCSS"),s.classList.add("marketplaceUserCSS"),s.innerHTML=e,document.body.appendChild(s)):((n=document.createElement("link")).setAttribute("rel","stylesheet"),n.setAttribute("href","user.css"),n.classList.add("userCSS"),document.body.appendChild(n))}catch(e){console.warn(e)}if(Spicetify.Config.current_theme=t.manifest?.name,t.include?.length)for(const d of t.include){var o=document.createElement("script");let e=d;if(Lr(d)){var{user:l,repo:c,branch:u,filePath:h}=Nr(d);if(!(l&&c&&u&&h))return;e=`https://cdn.jsdelivr.${p}/gh/${l}/${c}@${u}/`+h,h.endsWith(".mjs")&&(o.type="module")}o.src=e+"?time="+Date.now(),o.classList.add("marketplaceScript"),document.body.appendChild(o),Rr(d)}}else console.debug("No theme manifest found")};console.log("Loaded Marketplace extension");var r=M(g.installedSnippets,[]).map(e=>M(e));if(r=r,(s=document.querySelector("style.marketplaceSnippets"))&&s.remove(),s=document.createElement("style"),r=r.reduce((e,t)=>`${e}/* ${t.title} - ${t.description} */
${t.code}
`,""),s.innerHTML=r,s.classList.add("marketplaceSnippets"),document.body.appendChild(s),p){window.sessionStorage.setItem("marketplace-request-tld",p);for(const n of M(g.installedExtensions,[]))(e=>{e=M(e);if(e&&e.extensionURL){console.debug("Initializing extension: ",e);var t=document.createElement("script");if(t.defer=!0,t.src=e.extensionURL,Lr(t.src)){var{user:r,repo:s,branch:n,filePath:a}=Nr(e.extensionURL);if(!(r&&s&&n&&a))return;t.src=`https://cdn.jsdelivr.${p}/gh/${r}/${s}@${n}/`+a,a.endsWith(".mjs")&&(t.type="module")}t.src=t.src+"?time="+Date.now(),document.body.appendChild(t),Rr(e.manifest?.main)}})(n);var r=Spicetify.Config["current_theme"],s=(localStorage.setItem(g.localTheme,r),localStorage.getItem(g.themeInstalled));s&&("marketplace"!==r.toLocaleLowerCase()?Spicetify.showNotification(ye("notifications.wrongLocalTheme"),!0,5e3):t(s))}else window.navigator.onLine?(console.error(new Error("Unable to connect to the CDN, please check your Internet configuration.")),Spicetify.showNotification(ye("notifications.noCdnConnection"),!0,5e3)):window.addEventListener("online",e,{once:!0})}else setTimeout(e,100)}(),async function(){console.debug("Preloading extensions and themes..."),window.sessionStorage.clear();var e=await(await fetch("https://raw.githubusercontent.com/spicetify/marketplace/main/resources/blacklist.json").then(e=>e.json()).catch(()=>({}))).repos;window.sessionStorage.setItem("marketplace:blacklist",JSON.stringify(e)),await Promise.all([Er("extension",0),Er("theme",0),Er("app",0)])}()})()}();